
<!DOCTYPE html>
<html>
<head>
	<title>Hello Mom!</title>
	<style type="text/css">
		html, body {
			width: 100%;
			height: 100%;
			margin: 0px;
			padding: 0px;
			overflow: hidden;
		}
	</style>
</head>
<body>
	<script src="//www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/pixi.js/3.0.8/pixi.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.0/TweenMax.min.js"></script>

	<script>

		window.castReceiverManager = cast.receiver.CastReceiverManager.getInstance();
		var customMessageBus = castReceiverManager.getCastMessageBus('urn:x-cast:se.mowday.cast.quiz');
		customMessageBus.onMessage = function(event) {
			log("Received message", event);
			customMessageBus.send({type:'RESPONDING'});
		};
		window.castReceiverManager.start();

	</script>
	<script>
		var width = window.innerWidth;
		var height = window.innerHeight;

		var renderer = new PIXI.CanvasRenderer(width, height);
		document.body.appendChild(renderer.view);

		var stage = new PIXI.Container();
		var box   = new PIXI.Graphics();
		box.beginFill(0xFF00FF);
		box.drawRect(0, 0, 200, 200);
		stage.addChild(box);

		var text = new PIXI.Text('Ready', { fill: 0xFF00FF, font : '12px Arial' });
		stage.addChild(text);

		function animate() {
			box.rotation += 0.001;
			box.pivot = new PIXI.Point(100, 100);
			box.x = width / 2;
			box.y = height / 2;
			renderer.render(stage);
			window.requestAnimationFrame(animate);
		}
		animate();

		function log() {
			var a = [];
			a.push.apply(a, arguments);
			var s = '';
			a.map(function(value) { s += value.toString() + ', '; });
			s = s.substring(0, s.length - 2);
			text.text = s + '\n' + text.text;
			console.log(s)
		}

		log('Awaiting log!');
	</script>
</body>
</html>